---
description: 
globs: 
alwaysApply: false
---
---
description: "GeneraciÃ³n automÃ¡tica de commits siguiendo Conventional Commits para este proyecto especÃ­fico"
rule_type: "Agent Requested"
---

# GeneraciÃ³n AutomÃ¡tica de Commit Messages

Esta regla se aplica cuando necesites generar mensajes de commit automÃ¡ticamente para este proyecto.

## INSTRUCCIONES OBLIGATORIAS PARA COMMITS

### 1. AnÃ¡lisis Previo Requerido
ANTES de generar el commit message, DEBES:
- Ejecutar `git diff --staged` para analizar cambios
- Identificar archivos modificados y su ubicaciÃ³n
- Determinar el impacto y naturaleza de los cambios

### 2. Mapeo de Directorios a Ãmbitos (OBLIGATORIO)
```
app/modules/auth/ â†’ auth
app/modules/customer/ â†’ customer
app/modules/location/ â†’ location
app/modules/services/ â†’ services
app/modules/maintable/ â†’ maintable
app/modules/user/ â†’ user
app/modules/shifts/ â†’ shifts
app/modules/days_off/ â†’ days_off
app/modules/user_locations/ â†’ user_locations
app/modules/share/ â†’ share
config/ â†’ config
alembic/ â†’ database
app/main.py â†’ api
pyproject.toml â†’ build
package.json â†’ build
commitlint.config.mjs â†’ ci
README.md â†’ docs
.cursorrules â†’ chore
.cursor/ â†’ chore
```

### 3. LÃ³gica de DeterminaciÃ³n de Tipo CON ICONOS OBLIGATORIOS
- **âœ¨ feat**: Nuevos archivos, funciones, endpoints, features
- **ğŸ› fix**: CorrecciÃ³n de bugs, validaciones, errores
- **â™»ï¸ refactor**: Cambios de estructura sin nueva funcionalidad  
- **ğŸ”§ chore**: ConfiguraciÃ³n, dependencias, archivos de setup
- **ğŸ“ docs**: Solo documentaciÃ³n (README, comentarios)
- **ğŸ§ª test**: Archivos y funciones de pruebas
- **ğŸ¨ style**: Formateo, linting, imports sin cambio lÃ³gico
- **âš¡ perf**: Optimizaciones de rendimiento
- **ğŸ“¦ build**: Dependencies, build tools, package managers
- **ğŸš€ ci**: CI/CD, workflows, automatizaciÃ³n

### 4. Formato de Salida OBLIGATORIO (Compatible con Commitlint)
```
<tipo>(<Ã¡mbito>): <descripciÃ³n>

[Body opcional solo si es necesario]
```

**NOTA IMPORTANTE:** Los iconos se configuran en commitlint.config.mjs, NO en el mensaje del commit.
El mensaje debe seguir el formato estÃ¡ndar de Conventional Commits.

### 5. Reglas de Formato ESTRICTAS
- âœ… DescripciÃ³n en minÃºsculas: `add new feature`
- âŒ NO capitalizar: `Add new feature`
- âœ… Verbo imperativo: `add`, `fix`, `update`
- âŒ NO pasado: `added`, `fixed`, `updated`
- âœ… MÃ¡ximo 72 caracteres en header
- âœ… Sin punto final en descripciÃ³n
- âœ… Body solo si se necesita explicar el "por quÃ©"
- âœ… **CRITICAL**: Cada lÃ­nea del body mÃ¡ximo 100 caracteres
- âœ… Usar saltos de lÃ­nea para mantener lÃ­mite de caracteres

### 6. Ejemplos para Este Proyecto (Compatible con Commitlint)
**Correcto:**
- `feat(maintable): add criteria query handler`
- `fix(customer): resolve status validation error`
- `refactor(share): simplify data shaper logic`
- `chore(cursor): migrate rules to new format`

**Incorrecto:**
- `âœ¨ feat(maintable): add criteria query handler` (icono rompe commitlint)
- `Feat(maintable): Add criteria query handler` (mayÃºsculas)
- `feat: added new functionality` (pasado, sin Ã¡mbito especÃ­fico)
- `fix(customer): resolve status validation error.` (punto final)

### 7. Proceso de GeneraciÃ³n
1. Analizar archivos staged
2. Identificar Ã¡mbito usando mapeo
3. Determinar tipo basado en naturaleza del cambio
4. Escribir descripciÃ³n clara en imperativo
5. Verificar lÃ­mite de caracteres
6. AÃ±adir body solo si es complejo

### 8. Manejo de LÃ­neas Largas en Body
Cuando el body exceda 100 caracteres por lÃ­nea:
- Dividir en mÃºltiples lÃ­neas
- Usar guiones para listas
- Mantener contexto y legibilidad
- Ejemplo correcto:
```
refactor(maintable): consolidar funcionalidad de categorÃ­as y servicios

RefactorizaciÃ³n mayor del mÃ³dulo maintable para unificar el manejo de 
categorÃ­as y servicios bajo una arquitectura mÃ¡s genÃ©rica y mantenible.

Cambios principales:
- Eliminadas clases especÃ­ficas de Category y Service por implementaciÃ³n genÃ©rica
- Consolidados repositorios especÃ­ficos en maintable_repository genÃ©rico
- Unificadas rutas de categorÃ­as y servicios en maintable_v1_routes
```

### 9. Mensaje Final (Solo el mensaje, SIN comando)
Proporciona SOLO el mensaje de commit:
```
tipo(Ã¡mbito): descripciÃ³n
```

O con body si es necesario:
```
tipo(Ã¡mbito): descripciÃ³n

ExplicaciÃ³n del por quÃ© (mÃ¡ximo 100 caracteres por lÃ­nea)

Closes #123
```

**Ejemplos de mensajes:**
```
feat(maintable): add criteria query handler
fix(customer): resolve validation error
refactor(share): simplify data mapper
```


